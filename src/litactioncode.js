"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.litCode = void 0;
exports.litCode = "(async () => {\n  const resp = await fetch(url).then((response) => response);\n  const repository = await resp.arrayBuffer();\n  const timestamp = Date.now().toString();\n  const repositoryCommit = new Uint8Array(\n    await crypto.subtle.digest('SHA-256', repository)\n  );\n\n  const toSignJson = { // cannot include timestamp\n    url,\n    repositoryCommit,\n  };\n\n  const toSignStr = JSON.stringify(toSignJson, null, 0);\n  const toSignBuff = new Uint8Array(toSignStr.length);\n  for (var i = 0; i < toSignStr.length; i++) {\n    toSignBuff[i] = toSignStr.charCodeAt(i);\n  }\n\n  const toSign = new Uint8Array(\n    await crypto.subtle.digest('SHA-256', toSignBuff)\n  );\n\n  const sigShare = await LitActions.signEcdsa({\n    toSign,\n    publicKey,\n    sigName: \"sig\",\n  });\n\n  LitActions.setResponse({\n    response: JSON.stringify({ timestamp, url, repositoryCommit}),\n  });\n})();";
